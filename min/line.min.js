"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Cart=function(){function t(){_classCallCheck(this,t),this.obj=localStorage.getItem("addcar")?JSON.parse(localStorage.getItem("addcar")):[],this.count=0,this.carnum1=0,this.init(),this.balance()}return _createClass(t,[{key:"init",value:function(){var t=this;$(document).ready(function(){t.rander()})}},{key:"rander",value:function(){var l=this;$.ajax({url:"http://localhost/19online/json/shop.json",success:function(t){for(var e="",n=0;n<l.obj.length;n++)for(var i=0;i<t.length;i++)if(l.obj[n].id==t[i].goodsId){var s=t[i].price.slice(1),a=parseInt(l.obj[n].nums);e+=' <tr>\n                                        <td>\n                                            <input type="checkbox" class="checkboxzi" value="">选择\n                                        </td>\n                                        <td>\n                                            <img src="'+t[i].htmlimg+'" alt="">\n                                            <a href="./details.html" ><span index="'+t[i].goodsId+'" class="liser">'+t[i].name+"</span></a>\n                                        </td>\n                                        <td>"+t[i].price+".00</td>\n                                        <td>"+t[i].Integral+'</td>\n                                        <td><button class="subtract1">-</button><input type="text" class="num" value="'+l.obj[n].nums+'"><button class="plus1">+</button></td>\n                                        <td>￥'+s*a+'.00</td>\n                                        <td><button id="'+t[i].goodsId+'" class="delete">删除</button></td>\n                                    </tr>'}$("#tbody1").html(e),l.incident(),l.checkbox1(),l.checkboxnum()}})}},{key:"incident",value:function(){var e=this;$("#tbody1").on("click",function(t){t=t||event;e.terui=t.target.parentNode.parentNode,e.sda(t),"checkboxzi"===t.target.className&&(!0===$(t.target).get(0).checked?e.count+=1*e.terui.children[5].innerText.slice(1):!1===$(t.target).get(0).checked&&($(".checkboxs").get(0).checked=!1,e.count-=1*e.terui.children[5].innerText.slice(1)),$(".tatol").get(0).innerText="￥"+e.count+".00"),e.delete(t),e.Jump(t)})}},{key:"checkboxnum",value:function(){var e=[];$(".checkboxzi").on("click",function(){for(var t=0;t<$(".checkboxzi").length;t++)e.push($(".checkboxzi").get(t));e.every(function(t){return t.checked})&&($(".checkboxs").get(0).checked=!0)})}},{key:"Jump",value:function(t){"liser"===t.target.className&&(this.ids=$(t.target).attr("index"),sessionStorage.setItem("goodId",this.ids))}},{key:"checkbox1",value:function(){var e=this;$(".checkboxs").on("click",function(){for(var t=e.count=0;t<$(".checkboxzi").length;t++)!0===$(".checkboxs").get(0).checked?($(".checkboxzi").get(t).checked=!0,e.count+=1*$("#tbody1").get(0).children[t].children[5].innerText.slice(1)):!1===$(".checkboxs").get(0).checked&&($(".checkboxzi").get(t).checked=!1);$(".tatol").get(0).innerText="￥"+e.count+".00"})}},{key:"sda",value:function(t){if("subtract1"===t.target.className||"plus1"===t.target.className){"subtract1"===t.target.className&&(!0===this.terui.children[0].children[0].checked&&(this.count==this.terui.children[2].innerText.slice(1)?(this.count,this.terui.children[2].innerText.slice(1)):this.count-=this.terui.children[2].innerText.slice(1),$(".tatol").get(0).innerText="￥"+this.count+".00"),$(t.target).next().val()<=1&&(alert("商品最少为1件"),$(t.target).next().val("2")),this.nums1=parseInt($(t.target).next().val())-1,$(t.target).next().val(this.nums1),this.amount(t,this.nums1)),"plus1"===t.target.className&&(!0===this.terui.children[0].children[0].checked&&(this.count+=1*this.terui.children[2].innerText.slice(1),$(".tatol").get(0).innerText="￥"+this.count+".00"),99<=$(t.target).prev().val()&&(alert("商品最多为99件"),$(t.target).prev().val("99")),this.nums2=parseInt($(t.target).prev().val())+1,$(t.target).prev().val(this.nums2),this.amount(t,this.nums2));for(var e=this.carnum1=0;e<this.obj.length;e++)this.carnum1=parseInt(this.carnum1)+parseInt(this.obj[e].nums);$("#carnum").text(this.carnum1),$(".numing").text(this.carnum1);var n="￥"+this.terui.children[4].children[1].value*this.terui.children[2].innerText.slice(1)+".00";this.terui.children[5].innerText=n||""}}},{key:"delete",value:function(t){if("delete"===t.target.className){for(var e=0;e<this.obj.length;e++)this.obj[e].id==t.target.id&&(t.target.parentNode.parentNode.remove(),this.obj.splice(e,1));localStorage.setItem("addcar",JSON.stringify(this.obj))}}},{key:"amount",value:function(t,e){this.ids=this.terui.children[6].children[0].id;for(var n=0;n<this.obj.length;n++)this.obj[n].id==this.ids&&(this.obj[n].nums=e);localStorage.setItem("addcar",JSON.stringify(this.obj))}},{key:"balance",value:function(){$(".balance").on("click",function(){0==localStorage.getItem("loginok")?alert("此功能在开发中"):alert("请先登录")})}}]),t}();new Cart,$("#header").load("http://localhost/19online/html/common.html .header",function(){function t(){_classCallCheck(this,t),this.logins=localStorage.getItem("loginok")?JSON.parse(localStorage.getItem("loginok")):[],this.option=localStorage.getItem("logins")?JSON.parse(localStorage.getItem("logins")):[],this.carnum=0,this.init(),this.quiting()}new(_createClass(t,[{key:"init",value:function(){if(0===this.logins){$(".logining").text("欢迎  "+this.option.name).css({color:"#08d3f7"}),$(".regsiter").text("退出").css({color:"#920505",cursor:"pointer"}),this.addcar1=localStorage.getItem("addcar")?JSON.parse(localStorage.getItem("addcar")):[];for(var t=0;t<this.addcar1.length;t++)this.carnum=parseInt(this.carnum)+parseInt(this.addcar1[t].nums);$("#carnum").text(this.carnum)}}},{key:"quiting",value:function(){$(".regsiter").on("click",function(){localStorage.removeItem("loginok"),$(".logining").html('<a href="./regsiter.html">注册会员&nbsp;|&nbsp;</a>'),$(".regsiter").html('<a href="./login.html">登录</a>')})}}]),t)}),$("#nav").load("http://localhost/19online/html/common.html .nav"),$("#guild").load("http://localhost/19online/html/common.html .guild"),$("#aboutus").load("http://localhost/19online/html/common.html .aboutus"),$("#footer").load("http://localhost/19online/html/common.html .footer"),$("#more").load("http://localhost/19online/html/common.html .nore");var Randerbig=function(){function t(){_classCallCheck(this,t),this.num=0,this.carnum2=0,this.init()}return _createClass(t,[{key:"init",value:function(){var t=this;$(document).ready(function(){t.ajax1(),t.id=sessionStorage.getItem("goodId"),t.logs2=JSON.parse(sessionStorage.getItem("goodId"))})}},{key:"ajax1",value:function(){var i=this;$.ajax({url:"http://localhost/19online/json/shop.json",success:function(t){for(var e="",n=0;n<t.length;n++)t[n].goodsId===i.id&&(e='<div class="margin">\n                       <div class="details-t">\n                           <div class="place">\n                               <p>\n                                   <span>您所在的位置：</span><a href="./index.html">首页</a>\n                                   <i>&gt;&gt;</i>\n                                   <a href="../html/list.html">&nbsp; '+t[n].wineclass+"</a>\n                                   <i>&gt;&gt;</i><i>&gt;&gt;</i>\n                                   <span>"+t[n].name+'</span>\n                               </p>\n                           </div>\n                           <div class="product">\n                               <div id="magnifying">\n                                   <div class="magnifying-l">\n                                       <div class="lens-big">\n                                           <div class="smell-lens">\n                                               <div class="huan-lens">\n                                               <img src="'+t[n].bigimg1+'" alt="">\n                                                </div>\n                                               <div class="lens"></div>\n                                           </div>\n                                           <div class="big-lens"> <img src="'+t[n].bigimg1+'"\n                                                   alt=""></div>\n                                       </div>\n                                       <div class="spec-list">\n                                           <button class="specleft specbut"></button>\n                                           <ul>\n                                               <li><img src="'+t[n].bigimg1+'" alt=""></li>\n                                               <li><img src="'+t[n].bigimg2+'" alt=""></li>\n                                               <li><img src="'+t[n].bigimg3+'" alt=""></li>\n                                           </ul>\n                                           <button class="specright specbut"></button>\n                                       </div>\n                                       <div class="refer">\n                                           <span> 产品图片及介绍说明仅供参考，一切以发货实物为准！</span>\n                                       </div>\n                                   </div>\n                                   <div class="magnifying-r" id="'+t[n].goodsId+'">\n                                       <div class="winename">\n                                           <h1>'+t[n].name+' &nbsp; <span class="zo1">'+t[n].name2+"</span></h1>\n                                           <h2>"+t[n].name3+'</h2>\n                                       </div>\n                                       <div class="cost">\n                                           <p>\n                                               <i>会员价：</i>\n                                               <span id="price">'+t[n].price+'</span><i>/支</i>\n                                               <b>零售价:<span id="price2">'+t[n].retail+'.00</span></b>\n                                           </p>\n                                       </div>\n                                       <div class="integral">\n                                           <span>赠送积分：<b>64</b></span> <a href="#" class="behoof">积分的用途</a>\n                                           <a class="login" href="./login.html">&gt;&gt;登录</a>\n                                           <span>后可以查看登记奖励积分</span>\n                                       </div>\n                                       <div class="quantity">\n                                           <span>数量</span>\n                                           <button id="subtract" class="but">-</button>\n                                           <input type="text" id="numde" value="1">\n                                           <button id="plus" class="but">+</button>\n                                       </div>\n                                       <div>\n                                           <button id="promptly" class="mai">立即购买</button>\n                                           <button id="car" class="mai">\n                                               \x3c!-- <img src="../images/details/car.jpg" alt=""> --\x3e\n                                               加入购物车\n                                           </button>\n                                       </div>\n                                   </div>\n                               </div>\n                               <div class="correlation">\n                                   <span class="correlation-t">相关产品</span>\n                                   <ul>\n                                       <li>\n                                       <a href="#" title="'+t[9].name+'">\n                                       <img src="'+t[9].htmlimg+'" alt="'+t[9].name+'">\n                                       <span>'+t[9].name+"</span>\n                                       <em>"+t[9].price+'.00</em>\n                                   </a>\n                                       </li>\n                                       <li>\n                                           <a href="#" title="'+t[7].name+'">\n                                               <img src="'+t[7].htmlimg+'" alt="'+t[7].name+'">\n                                               <span>'+t[7].name+"</span>\n                                               <em>"+t[7].price+'.00</em>\n                                           </a>\n                                       </li>\n           \n                                   </ul>\n                               </div>\n                           </div>\n                       </div>\n                       <div class="details-b">\n                           <div class="catering detailsed">\n                               <div class="catering-t details1">\n                                   <span>配餐建议</span>\n                               </div>\n                               <div class="catering-b details1-b">\n                                   <p>此酒可作为理想的开胃酒，或搭配新鲜热带水果拼盘，美味无比。</p>\n                                   <img src="'+t[n].detsimg1+'" alt="">\n                               </div>\n                           </div>\n                           <div class="introduce detailsed">\n                                   <div class="introduce-t details1">\n                                       <span>产品介绍</span>\n                                   </div>\n                                   <div class="introduce-b details1-b">\n                                       <img src="'+t[n].detsimg2+'" alt="">\n                                       \n                                       <img src="" alt="">\n                                   </div>\n                               </div>\n                       </div>\n                   </div>');$("#details").html(e),i.biglens(),i.jionCar()}})}},{key:"biglens",value:function(){$(".spec-list").find("ul").children("li").hover(function(){var t=$(this).html();$(".huan-lens").html(t),$(".big-lens").html(t)}),$(".smell-lens").hover(function(t){$(".big-lens").show(),$(".lens").show();var e=$(".big-lens").children("img").width(),n=$(".big-lens").children("img").height(),o=($(this).width()-$(".lens").width())/(e-$(".big-lens").width()),c=($(this).height()-$(".lens").height())/(n-$(".big-lens").height());$(document).on("mousemove.a",function(t){var e=t.clientX,n=t.clientY,i=$(".smell-lens").get(0).getBoundingClientRect().left,s=$(".smell-lens").get(0).getBoundingClientRect().top,a=e-i-$(".lens").width()/2,l=n-s-$(".lens").height()/2;a<0?a=0:a>$(".smell-lens").width()-$(".lens").width()&&(a=$(".smell-lens").width()-$(".lens").width()),l<0?l=0:l>$(".smell-lens").height()-$(".lens").height()&&(l=$(".smell-lens").height()-$(".lens").height()),$(".lens").css({left:a+"px",top:l+"px"}),$(".big-lens").children("img").css({left:-a/o+"px",top:-l/c+"px"})})},function(){$(".big-lens").hide(),$(".lens").hide()})}},{key:"jionCar",value:function(){this.leftbut(),this.blour()}},{key:"blour",value:function(){var e=this;$("#numde").on("input",function(){var t=/^\d+$/;""===$("#numde").val()?(alert("数量不能为空"),$("#numde").val("1")):t.test($("#numde").val())?t.test($("#numde").val())&&99<=$("#numde").val()&&(alert("请理性消费数量控制在99以下"),$("#numde").val("99"),e.num=$("#numde").val()):(alert("数量必须为数字"),parseInt($("#numde").val("1")))})}},{key:"leftbut",value:function(){var i=this;this.num=$("#numde").val(),$(".magnifying-r").on("click",function(t){var e=localStorage.getItem("loginok");if(t.target===$("#subtract").get(0)?(i.num--,i.num<=1&&(i.num=1,alert("最少要有一件商品")),$("#numde").val(i.num)):t.target===$("#plus").get(0)&&(i.num++,99<i.num&&(i.num=99,alert("请停止您的剁手行为")),$("#numde").val(i.num)),t.target===$("#promptly").get(0)&&(0==e?$(window).attr("location","http://localhost/19online/html/cart.html"):alert("请先登录")),t.target===$("#car").get(0))if(0==e){alert("加入购物车成功"),i.addbut(),this.addcar1=localStorage.getItem("addcar")?JSON.parse(localStorage.getItem("addcar")):[];for(var n=this.carnum2=0;n<this.addcar1.length;n++)console.log(_typeof(parseInt(this.addcar1[n].nums))),console.log(_typeof(parseInt(this.carnum2))),this.carnum2=parseInt(this.carnum2)+parseInt(this.addcar1[n].nums);$("#carnum").text(this.carnum2)}else alert("请先登录")})}},{key:"addbut",value:function(){var t=localStorage.getItem("addcar")?JSON.parse(localStorage.getItem("addcar")):[];if(0===t.length)t.push({id:this.logs2,nums:this.num});else{for(var e=1,n=0;n<t.length;n++)if(t[n].id==this.logs2){var i=parseInt(this.num),s=parseInt(t[n].nums);t[n].nums=i+s,e=0}1==e&&t.push({id:this.logs2,nums:this.num})}localStorage.setItem("addcar",JSON.stringify(t))}}]),t}();new Randerbig;var List2=function(){function t(){_classCallCheck(this,t),this.init()}return _createClass(t,[{key:"init",value:function(){var i=this;$(document).ready(function(){$.ajax({url:"http://localhost/19online/json/shop.json",success:function(t){$(".loding").remove();for(var e="",n=0;n<t.length;n++)e+='<li id="'+t[n].goodsId+'">\n                                    <a href="./details.html" title="'+t[n].name+'" target="_blank"><img src="'+t[n].htmlimg+'" alt="">\n                                    <p>'+t[n].name+"</p>\n                                    </a>\n                                    <span>零售价:<b>"+t[n].retail+"</b> </span>\n                                    <span>会员价:<i>"+t[n].price+"</i></span>\n                                </li>";$("#lists").find("ul").html(e),i.cookies2()},error:function(t,e){$(".loding").remove(),alert("加载超时"),console.log(e)}})})}},{key:"cookies2",value:function(){$("#lists").find("ul").children("li").on("click",function(){sessionStorage.setItem("goodId",this.id)})}}]),t}();new List2;var Longin=function(){function t(){_classCallCheck(this,t),this.option=localStorage.getItem("logins"),this.option=JSON.parse(this.option),this.fla=!1,this.but()}return _createClass(t,[{key:"but",value:function(){var t=this;$("#but").on("click",function(){t.init(),t.fla?(alert("恭喜您登录成功"),$(window).attr("location","http://localhost/19online/html/index.html"),localStorage.setItem("loginok",0)):console.log("失败")})}},{key:"init",value:function(){""===$("#name").val()?$(".name1").text("用户名不能为空"):$(".name1").text("用户名输入错误"),this.fla=!1,""===$("#pass").val()?$(".pass111").text("密码不能为空"):$(".pass111").text("密码输入错误"),this.fla=!1,$("#pass").val()===this.option.pass&&$("#name").val()===this.option.name&&($(".pass111").text(""),$(".name1").text(""),this.fla=!0)}}]),t}();new Longin;var Regular=function(){function t(){_classCallCheck(this,t),console.log(0),this.res1=/^[a-zA-Z]{1}[a-zA-Z0-9]{5,9}$/,this.res2=/^[1][0-9]{10}$/,this.res3=/^\w{3,12}@\w{1,5}\.[a-z]{2,3}$/,this.res4=/^[\S]{6,10}$/,this.t1=1,this.t2=1,this.t3=1,this.t4=1,this.t5=1,this.load(),this.but()}return _createClass(t,[{key:"load",value:function(){this.init(),this.tel(),this.email(),this.pass1(),this.pass2(),this.deal(),this.but(),this.load1()}},{key:"load1",value:function(){$(window).load("http://localhost/19online/html/login.html")&&$("#usernamer").val("")}},{key:"init",value:function(){var t=this;$("#usernamer").on("input",function(){if(t.res1.test($("#usernamer").val()))$(".tishi").text("✔").css({color:"#0f0",fontSize:"16px"}),t.t1=0;else{$(".tishi").text("请输入以字母开头和5-10数字组成的名字").css({color:"#e10303",fontSize:"16px"}),t.t1=1}t.but(t.t1)})}},{key:"tel",value:function(){var t=this;$("#tel").on("input",function(){if(t.res2.test($("#tel").val()))$(".tel").text("✔").css({color:"#0f0",fontSize:"16px"}),t.t2=0;else{$(".tel").text("请输入以1开头11位数字组成的手机号").css({color:"#e10303",fontSize:"16px"}),t.t2=1}t.but(t.t2)})}},{key:"email",value:function(){var t=this;$("#email").on("input",function(){if(t.res3.test($("#email").val()))$(".email1").text("✔").css({color:"#0f0",fontSize:"16px"}),t.t3=0;else{$(".email1").text("请输入正确的邮箱").css({color:"#e10303",fontSize:"16px"}),t.t3=1}t.but(t.t3)})}},{key:"pass1",value:function(){var t=this;$("#pass1").on("input",function(){if(t.res4.test($("#pass1").val()))$(".passed").text("✔").css({color:"#0f0",fontSize:"16px"}),t.t4=0;else{$(".passed").text("请输入以6-10位的密码").css({color:"#e10303",fontSize:"16px"}),t.t4=1}t.but(t.t4)})}},{key:"pass2",value:function(){var t=this;$("#pass2").on("input",function(){if($("#pass1").val()===$("#pass2").val())$(".pass22").text("✔").css({color:"#0f0",fontSize:"16px"}),t.t5=0;else{$(".pass22").text("请确认您的密码").css({color:"#e10303",fontSize:"16px"}),t.t5=1}t.but(t.t5)})}},{key:"deal",value:function(){$("#deal").on("click",function(){$("#deal").get(0).checkbox||($("#deal").get(0).checkbox=!0,$(".deal1").css({display:"none"}))})}},{key:"but",value:function(){var n=this;$("#buts").on("click",function(){if(n.deal(),0===n.t1&&0===n.t2&&0===n.t3&&0===n.t4&&0===n.t5)if($("#deal").get(0).checkbox){var t=JSON.stringify({name:$("#usernamer").val(),pass:$("#pass1").val()});localStorage.setItem("logins",t),$(".regsiterok").stop().show(1e3);var e=3;setInterval(function(){$(".zhengzai").text(e),--e<0&&$(window).attr("location","http://localhost/19online/html/login.html")},1e3),$("#email").val("")}else $(".deal1").text("同意了才可以注册哦").css({fontSize:"16px"})})}}]),t}();new Regular;